<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Macos on 泥土巢</title>
    <link>http://nituchao.com/tags/macos/index.xml</link>
    <description>Recent content in Macos on 泥土巢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <copyright>Copyright (c) 2017, nituchao | All rights reserved.</copyright>
    <atom:link href="http://nituchao.com/tags/macos/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Mac OS Mavericks下安装单机版Hadoop</title>
      <link>http://nituchao.com/post/2014/macos-an-zhuang-hadoop/</link>
      <pubDate>Fri, 15 Aug 2014 17:17:17 +0800</pubDate>
      
      <guid>http://nituchao.com/post/2014/macos-an-zhuang-hadoop/</guid>
      <description>

&lt;p&gt;以下记录了我在Mac OS Mavericks下安装单机版Hadoop的经历。中间遇见了好多在Linux上没有遇到过的错误，尤其是因为主机名(HostName)等网络设置导致各种错误，真是太考验耐心了，不过，最后总算是跑起来了～～&lt;/p&gt;

&lt;h2 id=&#34;一-计算机配置如下&#34;&gt;一、计算机配置如下&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/about-macos.png&#34; width=800px alt=&#34;关于本机&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;二-软件版本&#34;&gt;二、软件版本&lt;/h2&gt;

&lt;h3 id=&#34;1-java版本-使用os系统自带的就可以&#34;&gt;1.Java版本，使用OS系统自带的就可以&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;java version &amp;quot;1.6.0_65&amp;quot;
Java(TM) SE Runtime Environment (build 1.6.0_65-b14-462-11M4609)
Java HotSpot(TM) 64-Bit Server VM (build 20.65-b04-462, mixed mode)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-ssh版本-使用系统自带的就可以&#34;&gt;2.SSH版本，使用系统自带的就可以&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;OpenSSH_6.2p2, OSSLShim 0.9.8r 8 Dec 2011
Bad escape character &#39;rsion&#39;.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-hadoop版本&#34;&gt;3.Hadoop版本&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;hadoop.1.0.3.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;三-安装过程&#34;&gt;三、安装过程&lt;/h2&gt;

&lt;h3 id=&#34;1-安装java&#34;&gt;1.安装Java&lt;/h3&gt;

&lt;p&gt;看过很多教程，都推荐用Java 1.6版本，系统自带的就可以，使用以下命令查看Java版本&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$java -version
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-安装ssh&#34;&gt;2.安装SSH&lt;/h3&gt;

&lt;p&gt;Mac OS X自带了Open-SSH不用再手动安装。接下来设置SSH免密码登录。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;使用以下命令生成RSA私钥和公钥(如果已经生成过的，请跳过)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$ssh-keygen -t rsa -P &amp;quot;&amp;quot; –f $HOME/.ssh/id_rsa
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;将公钥内容添加到authorized_keys列表里(如果已经添加过的，请跳过)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$cat $HOME/.ssh/id_rsa.pub &amp;gt;&amp;gt; $HOME/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;测试登录&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$ssh localhost
$ssh USERNAME@HOST_NAME
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;_ps:USERNAME表示用户名，HOST&lt;em&gt;NAME表示主机名&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;3-设置主机名和计算机名称&#34;&gt;3.设置主机名和计算机名称&lt;/h3&gt;

&lt;p&gt;Mac OS X的主机名称分为本地主机机名和网络主机名，这个要搞清楚，在后面设置Job tracker时要用到，很重要。&lt;/p&gt;

&lt;p&gt;建议把计算机名也设置成和主机名一样的。&lt;/p&gt;

&lt;p&gt;建议主机名全部使用小写字母，不要使用特殊字符，包括&lt;code&gt;-&lt;/code&gt;也不要使用。&lt;/p&gt;

&lt;p&gt;可以使用下面的命令设置&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$sudo scutil --set ComputerName newname
$sudo scutil --set HostName newname
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;计算机名(Computer Name)和主机名(Host Name)设置完成后可以在&lt;code&gt;共享&lt;/code&gt;设置页面查看到，&lt;code&gt;终端&lt;/code&gt;的&lt;code&gt;$&lt;/code&gt;前的名字是计算机名(Computer Name)。&lt;/p&gt;

&lt;p&gt;ps: 以下是我的计算机信息&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;用户名:liang&lt;/li&gt;
&lt;li&gt;计算机名:liangsimac&lt;/li&gt;
&lt;li&gt;本地主机名:liangsimac.local&lt;/li&gt;
&lt;li&gt;网络主机名:liangsimac&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;4-准备hadoop安装包&#34;&gt;4.准备Hadoop安装包&lt;/h3&gt;

&lt;p&gt;建议下载源码包，里面包含了默认的配置文件，请访问下面的链接下载hadoop-1.0.3.tar.gz&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;https://archive.apache.org/dist/hadoop/core/hadoop-1.0.3/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;将hadoop-1.0.3.tar.gz解压到以下目录&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/usr/local/share/hadoop-1.0.3
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;5-设置环境变量&#34;&gt;5.设置环境变量&lt;/h3&gt;

&lt;p&gt;修改&lt;code&gt;/etc/bashrc&lt;/code&gt;文件，添加以下配置&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# define HADOOP_HOME
export HADOOP_HOME=&amp;quot;/usr/local/share/hadoop-1.0.3&amp;quot;
export HADOOP_PREFIX=${HADOOP_HOME}
export HADOOP_BIN_HOME=&amp;quot;$HADOOP_HOME/bin&amp;quot;
export HADOOP_COMMON_HOME=${HADOOP_PREFIX}
export HADOOP_HDFS_HOME=${HADOOP_PREFIX}
export HADOOP_MAPRED_HOME=${HADOOP_PREFIX}
export HADOOP_CONF_DIR=&amp;quot;$HADOOP_HOME/conf&amp;quot;
export HADOOP_PID_DIR=&amp;quot;$HADOOP_HOME/run/hadoop-pid&amp;quot;
export PATH=${PATH}:${HADOOP_BIN_HOME}:${HADOOP_CONF_DIR}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;执行以下命令，使得配置生效&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$source /etc/bashrc
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;6-修改hosts文件&#34;&gt;6.修改hosts文件&lt;/h3&gt;

&lt;p&gt;通过&lt;code&gt;ifconfig&lt;/code&gt;命令查到本机&lt;code&gt;ip&lt;/code&gt;，比如我的ip地址为&lt;code&gt;10.237.250.47&lt;/code&gt;，然后添加如下信息&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10.237.250.47	liangsimac.local liangsimac
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后可以&lt;code&gt;ping liangsimac&lt;/code&gt;，确保已经生效。&lt;/p&gt;

&lt;h3 id=&#34;7-配置hadoop&#34;&gt;7.配置Hadoop&lt;/h3&gt;

&lt;p&gt;有6个文件需要修改，分别是&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hadoop-env.sh
core-site.xml
hdfs-site.xml
mapred-site.xml
masters
slaves
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;hadoop-env.sh&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;这个文件包含运行Hadoop需要的环境变量，请添加以下代码来解决可能出现的一个启动时&lt;a href=&#34;https://issues.apache.org/jira/browse/HADOOP-7489&#34;&gt;打印日志异常&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export HADOOP_OPTS=&amp;quot;-Djava.security.krb5.realm=-Djava.security.krb5.kdc=&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;core-site.xml&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;这个文件是Hadoop的一些核心配置，比如I/O设置等。&lt;/p&gt;

&lt;p&gt;首先要将hadoop包目录下&lt;code&gt;src/core/core-default.xml&lt;/code&gt;拷贝到&lt;code&gt;conf/&lt;/code&gt;目录下，重命名为&lt;code&gt;core-site.xml&lt;/code&gt;。找到如下的字段并修改:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;fs.default.name&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;hdfs://liangsimac:9000&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;The name of the default file system.  A URI whose
  scheme and authority determine the FileSystem implementation.  The
  uri&#39;s scheme determines the config property (fs.SCHEME.impl) naming
  the FileSystem implementation class.  The uri&#39;s authority is used to
  determine the host, port, etc. for a filesystem.&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;/Users/liang/Hadoop/tmp/hadoop-${user.name}&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;A base for other temporary directories.&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中:&lt;/p&gt;

&lt;p&gt;1.&lt;code&gt;fs.default.name&lt;/code&gt;字段应该是Master节点主机名(&lt;code&gt;MASTER_HOST_NAME&lt;/code&gt;)，比如，我的主机名为&lt;code&gt;liangsimac&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;2.&lt;code&gt;hadoop.tmp.dir&lt;/code&gt;字段是存放Hadoop运行中的一些临时文件的目录。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;hdfs-site.xml&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;这个文件控制了Hadoop分布式文件系统处理，name-node,secondary name-node,data-nodes等相关的配置。&lt;/p&gt;

&lt;p&gt;首先要将hadoop包目录下&lt;code&gt;src/hdfs/hdfs-default.xml&lt;/code&gt;拷贝到&lt;code&gt;conf/&lt;/code&gt;目录下，重命名为&lt;code&gt;hdfs-site.xml&lt;/code&gt;。找到如下的字段并修改:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;dfs.replication&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;1&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;Default block replication. 
  The actual number of replications can be specified when the file is created.
  The default is used if replication is not specified in create time.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;dfs.permissions&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;false&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;
    If &amp;quot;true&amp;quot;, enable permission checking in HDFS.
    If &amp;quot;false&amp;quot;, permission checking is turned off,
    but all other behavior is unchanged.
    Switching from one parameter value to the other does not change the mode,
    owner or group of files or directories.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中:&lt;/p&gt;

&lt;p&gt;1.&lt;code&gt;dfs.replication&lt;/code&gt;字段是缺省的块复制数量。如果我们想利用所有节点的所有计算力量，这个值应该等于可利用节点数。&lt;/p&gt;

&lt;p&gt;2.&lt;code&gt;dfs.permissions&lt;/code&gt;字段是文件操作时的权限检查标识。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;mapred-site.xml&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;这个文件控制着MapReduct process, the job tracker, the tasktrackers的相关配置。&lt;/p&gt;

&lt;p&gt;首先要将hadoop包目录下&lt;code&gt;src/mapred/mapred-default.xml&lt;/code&gt;拷贝到&lt;code&gt;conf/&lt;/code&gt;目录下，重命名为&lt;code&gt;hdfs-site.xml&lt;/code&gt;。找到如下的字段名修改:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;mapred.job.tracker&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;liangsimac:9001&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;The host and port that the MapReduce job tracker runs
  at.  If &amp;quot;local&amp;quot;, then jobs are run in-process as a single map
  and reduce task.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;mapred.tasktracker.map.tasks.maximum&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;1&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;The maximum number of map tasks that will be run
  simultaneously by a task tracker.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;mapred.tasktracker.reduce.tasks.maximum&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;1&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;The maximum number of reduce tasks that will be run
  simultaneously by a task tracker.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

 &amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;mapred.max.split.size&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;1000&amp;lt;/value&amp;gt;
 &amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中:&lt;/p&gt;

&lt;p&gt;1.&lt;code&gt;mapred.job.tracker&lt;/code&gt;字段是job-tracker交互端口，必须指向master节点和正确的端口，Hadoop集群中只有master节点运行着job tracker，该字段应该设置为MASTER_HOST_NAME:port。&lt;/p&gt;

&lt;p&gt;2.&lt;code&gt;mapred.tasktracker.map.tasks.maximum&lt;/code&gt;字段表示task管理器可同时运行map任务的数量。&lt;/p&gt;

&lt;p&gt;3.&lt;code&gt;mapred.tasktracker.reduce.tasks.maximum&lt;/code&gt;字段表示task管理器可同时运行reduce任务的数量。&lt;/p&gt;

&lt;p&gt;4.&lt;code&gt;mapred.max.split.size&lt;/code&gt;字段关系着Hadoop如何通过HDFS分割(splits)和分发(distributes)输入文件。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;masters&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;请将下面的字段写入masters文件中&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MASTER_USERNAME@MASTER_HOST_NAME
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;比如，我的masters文件为:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;liang@liangsimac
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;slaves&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;请将下面的字段写入slaves文件中&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MASTER_USERNAME@MASTER_HOST_NAME
SLAVE_USERNAME_1@SLAVE_HOST_NAME_1
SLAVE_USERNAME_2@SLAVE_HOST_NAME_2
SLAVE_USERNAME_3@SLAVE_HOST_NAME_3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;比如，我的slaves文件为:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;liang@liangsimac
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;8-启动hadoop&#34;&gt;8.启动Hadoop&lt;/h3&gt;

&lt;p&gt;1.格式化HDFS文件系统&lt;/p&gt;

&lt;p&gt;请执行一下代码来格式化&lt;code&gt;namenode&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hadoop namenode -format
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2.运行Hadoop&lt;/p&gt;

&lt;p&gt;因为之前已经将&lt;code&gt;$HADOOP_HOME/bin&lt;/code&gt;添加到系统环境变量了，所以，可以直接执行下面的命令来启动Hadoop&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;start-all.sh
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3.通过&lt;code&gt;jps&lt;/code&gt;命令检查运行状况如下，表示所有的服务都开启了&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;36783 TaskTracker
38771 Jps
36647 SecondaryNameNode
19283 
36703 JobTracker
36565 DataNode
36483 NameNode
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4.访问下面两个页面表示服务正常运行&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;http://localhost:50030
http://localhsot:50070
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;50030: 表示Hadoop Map/Reduce任务运行进度监控信息&lt;/li&gt;
&lt;li&gt;50070: 表示Hadoop NameNode的运行信息&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>终端Session管理工具整理</title>
      <link>http://nituchao.com/post/2014/byobu-kuai-jie-jian-zheng-li/</link>
      <pubDate>Tue, 24 Jun 2014 15:19:00 +0800</pubDate>
      
      <guid>http://nituchao.com/post/2014/byobu-kuai-jie-jian-zheng-li/</guid>
      <description>

&lt;h2 id=&#34;tmux&#34;&gt;Tmux&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;2017年2月22日更新&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;最近一直在用Tmux作为默认的终端Session管理工具。Tmux可以轻松的完成窗口创建，屏幕切分，文本模式，命令行模式等功能。&lt;/p&gt;

&lt;p&gt;最让我满意的是多屏幕的同步操作功能。每次需要ssh到服务器查看日志时，我会将屏幕切割成四块，分别登陆到4个服务器上，然后开启sync模式，这样输入的命令将同时在4台服务器上一起执行，大大提高了操作效率。&lt;/p&gt;

&lt;p&gt;Tmux的Session支持后台运行，可以通过attache随时进入Tmux，并立即恢复工作状态。&lt;/p&gt;

&lt;h3 id=&#34;同步操作&#34;&gt;同步操作&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/tmux-session.png&#34; width=780px height=500px alt=&#34;tmux同步操作&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;byoby&#34;&gt;Byoby&lt;/h2&gt;

&lt;p&gt;byoby是Ubuntu团队开发的screen的替代产品，支持session管理，屏幕切分，SSH管理。配置和使用也非常简单，一直是我非常喜欢的系统Terminal的替代产品，大赞。&lt;/p&gt;

&lt;h3 id=&#34;帮助菜单&#34;&gt;帮助菜单&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;http://hanquan.qiniudn.com/byobuhelp.png&#34; alt=&#34;byobu帮助&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Chameleon引导ubuntu</title>
      <link>http://nituchao.com/post/2012/chameleon-yin-dao-ubuntu/</link>
      <pubDate>Sun, 03 Jun 2012 18:18:18 +0800</pubDate>
      
      <guid>http://nituchao.com/post/2012/chameleon-yin-dao-ubuntu/</guid>
      <description>&lt;p&gt;现在，我的笔记本上同时运行着3个系统，Windows 7，Mac OS 10.7和Ubuntu 10.10。Ubuntu 10.10主要是用来编译调试我的Egg Boiler系统。&lt;/p&gt;

&lt;p&gt;Ubuntu的grub2不能引导Mac OS X系统，所以用chameleon来引导三个系统是非常好的选择，同时chameleon是完全的图形化引导，非常漂亮。&lt;/p&gt;

&lt;p&gt;我的做法非常简单，首先要安装好三个系统，特别要注意的是安装Ubuntu时，要选择把gurb2安装到Ubuntu的/分区，而不能将boot loader安在整个硬盘上，否则变色龙不能识别Ubuntu。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/chameleon-disk-part.png&#34; alt=&#34;grub2安装&#34; /&gt;&lt;/p&gt;

&lt;p&gt;然后在Mac OS下安装Mac版变色龙到Mac OS系统分区。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/chameleon-install.png&#34; alt=&#34;安装变色龙&#34; /&gt;&lt;/p&gt;

&lt;p&gt;最后，用Ubuntu的live-cd中的Gparted分区工具把Mac OS X所在分区的标记更改为”boot”，也就是开机从Mac OS X所在分区引导。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/chameleon-boot.png&#34; alt=&#34;设置boot标志&#34; /&gt;&lt;/p&gt;

&lt;p&gt;最后附一个变色龙主题:&lt;a href=&#34;http://dl.dbank.com/c08nqxu7af&#34;&gt;传送门&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/chameleon-lion.png&#34; alt=&#34;lion主题&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Windows下硬盘安装Mac OS Lion</title>
      <link>http://nituchao.com/post/2012/windows-ying-pan-an-zhuang-mac/</link>
      <pubDate>Sun, 20 May 2012 20:20:00 +0800</pubDate>
      
      <guid>http://nituchao.com/post/2012/windows-ying-pan-an-zhuang-mac/</guid>
      <description>

&lt;p&gt;经过一年多的尝试，建议大家安装Mac OS X 10.7原版，这个版本的Mac OS 系统对硬件的兼容性非常好，安装出现的问题也最少。建议大家驱动都自己手动安装，这样子才能更清楚自己装了哪些驱动，将来遇见诸如”五国”，”无限风火轮”的问题时才能更容易找到问题的原因。&lt;/p&gt;

&lt;p&gt;此日志讨论的是在Windows系统下通过原版Mac OS X 10.7的dmg镜像来安装Mac OS系统的方法。&lt;/p&gt;

&lt;p&gt;文章有点长，请耐心看完~~&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;理论上说，该方法也可以用来在Windows系统下制作U盘系统安装盘。&lt;/li&gt;
&lt;li&gt;理论上说，该方法也可以用来在Windows系统下安装10.7.1,10.7.2,10.7.3,10.7.4甚至是10.8的原版镜像。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr/&gt;

&lt;h2 id=&#34;准备工作&#34;&gt;准备工作&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;系统:Windows 7，Windows XP&lt;/li&gt;
&lt;li&gt;Mac OS X 10.7原版dmg镜像&lt;/li&gt;
&lt;li&gt;dmg镜像浏览工具HFSExplorer-0.21版&lt;/li&gt;
&lt;li&gt;磁盘分区工具Paragon Partition Manager 11版&lt;/li&gt;
&lt;li&gt;硬盘安装助手HD Install Helper v0.3版&lt;/li&gt;
&lt;li&gt;Mac Driver 8版&lt;/li&gt;
&lt;li&gt;Windows版变色龙&lt;/li&gt;
&lt;li&gt;必要的驱动和破解文件

&lt;ul&gt;
&lt;li&gt;适合自己机型的dsdt.aml&lt;/li&gt;
&lt;li&gt;修改过的适合10.7的OSInstall和OSInstall.mpkg，有需要的可以下载我准备好的传送门&lt;/li&gt;
&lt;li&gt;FakeSMC.kext 破解补丁，用于破解Mac OS内核，必须&lt;/li&gt;
&lt;li&gt;AppleACPIPS2Nub.kext&lt;/li&gt;
&lt;li&gt;ApplePS2Controller.kext&lt;/li&gt;
&lt;li&gt;NullCPUPowerManagement.kext 禁用电源管理功能，解决HPET错误&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;说明:以上的文件，除了dsdt.aml是要适合自己机型的外，其他的文件都是通用的，都可以在远景论坛上找到，想吃黑苹果，趴贴的精神和毅力必须是有的~~&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&#34;制作安装盘&#34;&gt;制作安装盘&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;安装Mac Driver 8备用，安装完后需要重启。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;留出3个分区&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;系统盘，20G,主分区，Mac OS X系统要安装在这个分区。建议该分区尽量大一点，因为装上Mac OS后我们还要装很多软件，比如我分了42G给该分区&lt;/li&gt;
&lt;li&gt;安装盘，至少2G,主分区(或逻辑分区)，Mac OS X的安装盘要安装在这个分区。&lt;/li&gt;
&lt;li&gt;备用盘，至少3G,不创建分区，该分区的目的是为了扩充安装盘分区，因为Mac OS X的镜像写入到安装盘分区后，安装盘分区只剩下300M左右，不能进行接下来的操作，这时候需要把这3G空白分区合进安装盘分区。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/v8TRO.png&#34; alt=&#34;分区&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;修改分区ID = AF。这一步很重要，ID = AF表示这是一个Apple HFS+分区，Mac OS只能安装在HFS+分区上。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/yRIIO.png&#34; alt=&#34;设置分区ID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;强烈建议: 用下面的命令来修改系统盘和安装盘的分区ID，因为经过实践发现，用磁盘分区工具来修改ID失败的概率很大，通过命令行来修改通常不会出错，运行cmd打开命令行窗口后，一次执行下面的命令,看到success就ok了，这个时候在资源管理器里就看不到这个分区了。&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;diskpart
select disk 0
list partition    #列出所有分区，找到放硬盘镜象的partition
select partition 0  #选择硬盘镜象所在的分区，这里的“0”换成你上面显示的硬盘镜象所在分区的编号
set id=af
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;从原dmg镜像中提取BaseSystem.dmg，mach_kernel和Packages文件夹。&lt;/p&gt;

&lt;p&gt;需要说明的是，直接下载的dmg镜像中提取的BaseSystem.dmg文件不能被硬盘安装助手识别，这个dmg镜像比如用HFSExplorer导出一次后才能被硬盘安装助手识别。因此这一步的操作有两个:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;用HFSExplor加载下载的Mac OS X Install ESD.dmg镜像。然后导出BaseSystem.dmg，mach_kernel和Packages文件夹备用&lt;/li&gt;
&lt;li&gt;用HFSExplor加载导出的BaseSystem.dmg文件，然后点击”Tools”-&amp;gt;”Create disk image”，将BaseSystem.dmg重新导出成硬盘安装助手可以识别的dmg镜像，可以把导出的文件命名为BaseSystem_Eable.dmg。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/q3mjP.png&#34; alt=&#34;导出dmg镜像&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olno3yiqc.bkt.clouddn.com/blog/img/pZBmF.png&#34; alt=&#34;导出进行中&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;最终有用的文件是：&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;BaseSystem_Eable.dmg&lt;/li&gt;
&lt;li&gt;mach_kernel&lt;/li&gt;
&lt;li&gt;Packages文件夹&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;用硬盘安装助手HD_Install_Heper_v0.3写入BaseSystem_Eable.dmg镜像到安装盘分区，几分钟后，提示”All Done, have fun!”即表示写入成功。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;扩充安装盘。&lt;/p&gt;

&lt;p&gt;镜像写入后，如果安装了Mac Driver 8，你就可以在资源管理器里看到，安装盘只剩下300M左右，这点空间是不足以进行接下来的工作的。这就需要尽心安装盘分区扩展。&lt;/p&gt;

&lt;p&gt;操作:打开Paragon Partition Manager磁盘分区工具，选中安装盘，右键选择”移动调整分区大小”,然后把剩下的那个空白分区合并进安装盘分区，然后点击左上角的”应用”按钮。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;将提取的mach_kernel文件放到安装盘根目录下&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;删除/System/Installtion目录下原来的Packages链接文件，并将提取的Packages文件夹放到安装盘的/System/Installtion/目录下。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;安装文件替换&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;将修改过的OSInstall.mpkg文件替换掉文件&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;/System/Installtion/Packages/OSInstall.mpkg
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;* 将修改过的OSInstall 文件替换掉文件
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;/System/Library/PrivateFrameworks/Install.framework/Frameworks/OSInstall.framework/Versions/A/OSInstall
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在安装盘根目录下建立Extra文件夹在该文件夹下放入以下文件&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;dsdt.aml，该文件是用于Mac OS X系统识别主板和硬件的，一定要是适合自己机型的才有用，没有这个文件或这不适合自己机型会导致绝大多数情况的”五国”问题&lt;/li&gt;
&lt;li&gt;建立Exentsion文件夹，放入下面四个驱动

&lt;ul&gt;
&lt;li&gt;FakeSMC.kext 破解补丁，用于破解Mac OS内核，必须&lt;/li&gt;
&lt;li&gt;AppleACPIPS2Nub.kext&lt;/li&gt;
&lt;li&gt;ApplePS2Controller.kext&lt;/li&gt;
&lt;li&gt;NullCPUPowerManagement.kext 禁用电源管理功能，解决HPET错误&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;安装windows版变色龙&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;到这里，Mac OS X的安装盘就做好了。重启计算机，选择变色龙引导，然后选择引导刚刚做好的Mac OS X安装盘分区，稍稍等一下就可以进入安装界面了，如果提示你找不到键盘，只要插上外接的USB键盘就可以了。之后用磁盘分区工具对准备好的系统分区进行”抹盘”，然后按照提示一路下一步安装即可。&lt;/p&gt;

&lt;hr/&gt;

&lt;p&gt;安装完成后，进入Windows系统，把安装盘里刚刚建立的Extra文件夹(包括里面的文件)复制到Mac OS X的系统盘，如果没有这个Extra文件夹，安装好的Mac OS系统是进不去的，会提示五国。复制完后，重启计算机，用Windows版版色龙就可以引导进入新安装好的Mac OS X系统了。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>